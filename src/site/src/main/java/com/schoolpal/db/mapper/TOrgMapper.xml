<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.schoolpal.db.inf.TOrgMapper">
	<resultMap id="OrgResultMap" type="com.schoolpal.db.model.TOrg">
		<id column="c_id" jdbcType="CHAR" property="cId" />
		<result column="c_code" jdbcType="VARCHAR" property="cCode" />
		<result column="c_name" jdbcType="VARCHAR" property="cName" />
		<result column="c_name_abbr" jdbcType="VARCHAR" property="cNameAbbr" />
		<result column="c_address" jdbcType="VARCHAR" property="cAddress" />
		<result column="c_city" jdbcType="VARCHAR" property="cCity" />
		<result column="c_state" jdbcType="VARCHAR" property="cState" />
		<result column="c_county" jdbcType="VARCHAR" property="cCounty" />
		<result column="c_owner" jdbcType="VARCHAR" property="cOwner" />
		<result column="c_owner_phone" jdbcType="VARCHAR" property="cOwnerPhone" />
		<result column="c_parent_id" jdbcType="CHAR" property="cParentId" />
		<result column="c_root_id" jdbcType="CHAR" property="cRootId" />
		<result column="c_creator" jdbcType="CHAR" property="cCreator" />
		<result column="c_create_time" jdbcType="TIMESTAMP" property="cCreateTime" />
		<result column="c_modifier" jdbcType="VARCHAR" property="cModifier" />
		<result column="c_modify_time" jdbcType="TIMESTAMP" property="cModifyTime" />
		<result column="c_available" jdbcType="BIT" property="cAvailable" />
		<result column="c_order_num" jdbcType="INTEGER" property="cOrderNum" />
		<association property="parentOrg" javaType="com.schoolpal.db.model.TOrg">
			<id column="po_id" jdbcType="CHAR" property="cId" />
			<result column="po_code" jdbcType="VARCHAR" property="cCode" />
			<result column="po_name" jdbcType="VARCHAR" property="cName" />
			<result column="po_name_abbr" jdbcType="VARCHAR" property="cNameAbbr" />
		</association>
		<association property="rootOrg" javaType="com.schoolpal.db.model.TOrg">
			<id column="ro_id" jdbcType="CHAR" property="cId" />
			<result column="ro_code" jdbcType="VARCHAR" property="cCode" />
			<result column="ro_name" jdbcType="VARCHAR" property="cName" />
			<result column="ro_name_abbr" jdbcType="VARCHAR" property="cNameAbbr" />
		</association>
	</resultMap>
	<select id="selectOneById" parameterType="java.lang.String" resultMap="OrgResultMap">
		SELECT o.*,
		po.c_id AS po_id, po.c_code AS po_code, po.c_name
		AS po_name, po.c_name_abbr
		AS po_name_abbr,
		ro.c_id AS ro_id, ro.c_code
		AS ro_code, ro.c_name AS ro_name, ro.c_name_abbr
		AS ro_name_abbr
		FROM
		t_org AS o
		LEFT JOIN t_org AS po ON po.c_id = o.c_parent_id
		LEFT JOIN
		t_org AS ro ON ro.c_id = o.c_root_id
		WHERE o.c_id =
		#{cId,jdbcType=VARCHAR}
	</select>
	<resultMap id="selectAllResultMap" type="com.schoolpal.db.model.TOrg">
		<id column="c_id" jdbcType="CHAR" property="cId" />
		<result column="c_code" jdbcType="VARCHAR" property="cCode" />
		<result column="c_name" jdbcType="VARCHAR" property="cName" />
		<result column="c_name_abbr" jdbcType="VARCHAR" property="cNameAbbr" />
		<result column="c_address" jdbcType="VARCHAR" property="cAddress" />
		<result column="c_city" jdbcType="VARCHAR" property="cCity" />
		<result column="c_state" jdbcType="VARCHAR" property="cState" />
		<result column="c_county" jdbcType="VARCHAR" property="cCounty" />
		<result column="c_owner" jdbcType="VARCHAR" property="cOwner" />
		<result column="c_owner_phone" jdbcType="VARCHAR" property="cOwnerPhone" />
		<result column="c_parent_id" jdbcType="CHAR" property="cParentId" />
		<result column="c_root_id" jdbcType="CHAR" property="cRootId" />
		<result column="c_creator" jdbcType="CHAR" property="cCreator" />
		<result column="c_create_time" jdbcType="TIMESTAMP" property="cCreateTime" />
		<result column="c_modifier" jdbcType="VARCHAR" property="cModifier" />
		<result column="c_modify_time" jdbcType="TIMESTAMP" property="cModifyTime" />
		<result column="c_available" jdbcType="BIT" property="cAvailable" />
		<result column="c_order_num" jdbcType="INTEGER" property="cOrderNum" />
	</resultMap>
	<select id="selectOneByCode" parameterType="java.lang.String" resultMap="OrgResultMap">
		SELECT *
		FROM t_org
		WHERE c_code = #{cCode,jdbcType=VARCHAR}
	</select>
    <select id="selectOneByCodeWithExcludeId" parameterType="String" resultMap="OrgResultMap">
        SELECT *
        FROM t_org
        WHERE c_code = #{arg0} and c_id != #{arg1}
    </select>
	<select id="selectAll" resultMap="selectAllResultMap">
		SELECT *
		FROM t_org
		WHERE
		c_available = 1
	</select>
	<delete id="deleteOneById" parameterType="java.lang.String">
		delete from t_org
		where
		c_id = #{cId,jdbcType=CHAR}
	</delete>
	<delete id="deleteOneByCode" parameterType="java.lang.String">
		delete from t_org
		where c_code = #{cCode,jdbcType=CHAR}
	</delete>
	<resultMap id="selectAllIdsResultMap" type="com.schoolpal.db.model.TOrg">
		<id column="c_id" jdbcType="CHAR" property="cId" />
		<result column="c_parent_id" jdbcType="CHAR" property="cParentId" />
	</resultMap>
	<select id="selectAllIds" resultMap="selectAllIdsResultMap">
		SELECT c_id, c_parent_id
		FROM t_org
		WHERE c_available = 1
	</select>
    <insert id="insertOne" parameterType="com.schoolpal.db.model.TOrg">
        insert into t_org
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="cId != null"> c_id, </if>
            <if test="cCode != null"> c_code, </if>
            <if test="cName != null"> c_name, </if>
            <if test="cNameAbbr != null"> c_name_abbr, </if>
            <if test="cAddress != null"> c_address, </if>
            <if test="cCity != null"> c_city, </if>
            <if test="cState != null"> c_state, </if>
            <if test="cCounty != null"> c_county, </if>
            <if test="cOwner != null"> c_owner, </if>
            <if test="cOwnerPhone != null"> c_owner_phone, </if>
            <if test="cParentId != null"> c_parent_id,  </if>
            <if test="cRootId != null"> c_root_id, </if>
            <if test="cCreator != null"> c_creator, </if>
            <if test="cCreateTime != null"> c_create_time, </if>
            <if test="cModifier != null"> c_modifier, </if>
            <if test="cModifyTime != null"> c_modify_time, </if>
            <if test="cAvailable != null"> c_available, </if>
            <if test="cOrderNum != null"> c_order_num, </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="cId != null"> #{cId,jdbcType=CHAR}, </if>
            <if test="cCode != null"> #{cCode,jdbcType=VARCHAR}, </if>
            <if test="cName != null"> #{cName,jdbcType=VARCHAR}, </if>
            <if test="cNameAbbr != null">#{cNameAbbr,jdbcType=VARCHAR}, </if>
            <if test="cAddress != null"> #{cAddress,jdbcType=VARCHAR},  </if>
            <if test="cCity != null"> #{cCity,jdbcType=VARCHAR}, </if>
            <if test="cState != null"> #{cState,jdbcType=VARCHAR}, </if>
            <if test="cCounty != null"> #{cCounty,jdbcType=VARCHAR}, </if>
            <if test="cOwner != null"> #{cOwner,jdbcType=VARCHAR}, </if>
            <if test="cOwnerPhone != null"> #{cOwnerPhone,jdbcType=VARCHAR}, </if>
            <if test="cParentId != null">#{cParentId,jdbcType=CHAR}, </if>
            <if test="cRootId != null"> #{cRootId,jdbcType=CHAR}, </if>
            <if test="cCreator != null"> #{cCreator,jdbcType=CHAR}, </if>
            <if test="cCreateTime != null"> #{cCreateTime,jdbcType=TIMESTAMP}, </if>
            <if test="cModifier != null"> #{cModifier,jdbcType=VARCHAR}, </if>
            <if test="cModifyTime != null"> #{cModifyTime,jdbcType=TIMESTAMP}, </if>
            <if test="cAvailable != null"> #{cAvailable,jdbcType=BIT}, </if>
            <if test="cOrderNum != null"> #{cOrderNum,jdbcType=INTEGER}, </if>
        </trim>
    </insert>
    <update id="updateOneById" parameterType="com.schoolpal.db.model.TOrg">
        update t_org
        <set>
            <if test="cCode != null"> c_code = #{cCode,jdbcType=VARCHAR}, </if>
            <if test="cName != null"> c_name = #{cName,jdbcType=VARCHAR}, </if>
            <if test="cNameAbbr != null"> c_name_abbr = #{cNameAbbr,jdbcType=VARCHAR}, </if>
            <if test="cAddress != null"> c_address = #{cAddress,jdbcType=VARCHAR}, </if>
            <if test="cCity != null"> c_city = #{cCity,jdbcType=VARCHAR}, </if>
            <if test="cState != null"> c_state = #{cState,jdbcType=VARCHAR}, </if>
            <if test="cCounty != null"> c_county = #{cCounty,jdbcType=VARCHAR}, </if>
            <if test="cOwner != null"> c_owner = #{cOwner,jdbcType=VARCHAR}, </if>
            <if test="cOwnerPhone != null"> c_owner_phone = #{cOwnerPhone,jdbcType=VARCHAR}, </if>
            <if test="cParentId != null"> c_parent_id = #{cParentId,jdbcType=CHAR}, </if>
            <if test="cRootId != null"> c_root_id = #{cRootId,jdbcType=CHAR}, </if>
            <if test="cCreator != null"> c_creator = #{cCreator,jdbcType=CHAR}, </if>
            <if test="cCreateTime != null"> c_create_time = #{cCreateTime,jdbcType=TIMESTAMP}, </if>
            <if test="cModifier != null"> c_modifier = #{cModifier,jdbcType=VARCHAR}, </if>
            <if test="cModifyTime != null"> c_modify_time = #{cModifyTime,jdbcType=TIMESTAMP}, </if>
            <if test="cAvailable != null"> c_available = #{cAvailable,jdbcType=BIT}, </if>
            <if test="cOrderNum != null"> c_order_num = #{cOrderNum,jdbcType=INTEGER}, </if>
        </set>
        where c_id = #{cId,jdbcType=CHAR}
    </update>
	<resultMap id="BaseResultMap" type="com.schoolpal.db.model.TOrg">
		<id column="c_id" jdbcType="CHAR" property="cId" />
		<result column="c_code" jdbcType="VARCHAR" property="cCode" />
		<result column="c_name" jdbcType="VARCHAR" property="cName" />
		<result column="c_name_abbr" jdbcType="VARCHAR" property="cNameAbbr" />
		<result column="c_address" jdbcType="VARCHAR" property="cAddress" />
		<result column="c_city" jdbcType="VARCHAR" property="cCity" />
		<result column="c_state" jdbcType="VARCHAR" property="cState" />
		<result column="c_county" jdbcType="VARCHAR" property="cCounty" />
		<result column="c_owner" jdbcType="VARCHAR" property="cOwner" />
		<result column="c_owner_phone" jdbcType="VARCHAR" property="cOwnerPhone" />
		<result column="c_parent_id" jdbcType="CHAR" property="cParentId" />
		<result column="c_root_id" jdbcType="CHAR" property="cRootId" />
		<result column="c_creator" jdbcType="CHAR" property="cCreator" />
		<result column="c_create_time" jdbcType="TIMESTAMP" property="cCreateTime" />
		<result column="c_modifier" jdbcType="VARCHAR" property="cModifier" />
		<result column="c_modify_time" jdbcType="TIMESTAMP" property="cModifyTime" />
		<result column="c_available" jdbcType="BIT" property="cAvailable" />
		<result column="c_order_num" jdbcType="INTEGER" property="cOrderNum" />
	</resultMap>
	<sql id="Example_Where_Clause">
		<where>
			<foreach collection="oredCriteria" item="criteria" separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue"> and ${criterion.condition}
								</when>
								<when test="criterion.singleValue"> and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue"> and ${criterion.condition} #{criterion.value}
									and #{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and
									${criterion.condition}
									<foreach close=")" collection="criterion.value" item="listItem"
										open="(" separator=","> #{listItem} </foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Update_By_Example_Where_Clause">
		<where>
			<foreach collection="example.oredCriteria" item="criteria"
				separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue"> and ${criterion.condition} </when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value} and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach close=")" collection="criterion.value" item="listItem"
										open="(" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Base_Column_List"> c_id, c_code, c_name, c_name_abbr,
		c_address, c_city, c_state, c_county, c_owner, c_owner_phone, c_parent_id,
		c_root_id, c_creator, c_create_time, c_modifier, c_modify_time,
		c_available,
		c_order_num
	</sql>
<!-- 	<select id="selectByExample" parameterType="com.schoolpal.db.model.TOrgExample"
		resultMap="BaseResultMap">
		select
		<if test="distinct"> distinct </if>
		'true'
		as QUERYID,
		<include refid="Base_Column_List" />
		from t_org
		<if test="_parameter 
		!= null">
			<include refid="Example_Where_Clause" />
		</if>
		<if test="orderByClause 
		!= null"> order by ${orderByClause} </if>
	</select> -->
	<select id="selectByPrimaryKey" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from t_org where c_id = #{cId,jdbcType=CHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		delete from t_org where c_id = #{cId,jdbcType=CHAR}
	</delete>
<!-- 	<delete id="deleteByExample" parameterType="com.schoolpal.db.model.TOrgExample">
		delete from t_org
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</delete> -->
	<insert id="insert" parameterType="com.schoolpal.db.model.TOrg">
		insert into t_org (c_id, c_code, c_name, c_name_abbr, c_address, c_city,
		c_state, c_county, c_owner, c_owner_phone, c_parent_id, c_root_id,
		c_creator,
		c_create_time, c_modifier, c_modify_time, c_available, c_order_num ) values
		(#{cId,jdbcType=CHAR}, #{cCode,jdbcType=VARCHAR},
		#{cName,jdbcType=VARCHAR},
		#{cNameAbbr,jdbcType=VARCHAR}, #{cAddress,jdbcType=VARCHAR}, #{cCity,jdbcType=VARCHAR},
		#{cState,jdbcType=VARCHAR}, #{cCounty,jdbcType=VARCHAR},
		#{cOwner,jdbcType=VARCHAR},
		#{cOwnerPhone,jdbcType=VARCHAR}, #{cParentId,jdbcType=CHAR}, #{cRootId,jdbcType=CHAR},
		#{cCreator,jdbcType=CHAR}, #{cCreateTime,jdbcType=TIMESTAMP},
		#{cModifier,jdbcType=VARCHAR},
		#{cModifyTime,jdbcType=TIMESTAMP}, #{cAvailable,jdbcType=BIT}, #{cOrderNum,jdbcType=INTEGER}
		)
	</insert>
<!-- 	<select id="countByExample" parameterType="com.schoolpal.db.model.TOrgExample"
		resultType="java.lang.Long">
		select count(*) from t_org
		<if test="_parameter 
		!= null">
			<include refid="Example_Where_Clause" />
		</if>
	</select> -->
	<update id="updateByExampleSelective" parameterType="map">
		update t_org
		<set>
			<if test="record.cId != null"> c_id = #{record.cId,jdbcType=CHAR}, </if>
			<if test="record.cCode != null"> c_code = #{record.cCode,jdbcType=VARCHAR}, </if>
			<if test="record.cName != null"> c_name = #{record.cName,jdbcType=VARCHAR},
			</if>
			<if test="record.cNameAbbr != null"> c_name_abbr = #{record.cNameAbbr,jdbcType=VARCHAR},
			</if>
			<if test="record.cAddress != null"> c_address = #{record.cAddress,jdbcType=VARCHAR},
			</if>
			<if test="record.cCity != null"> c_city = #{record.cCity,jdbcType=VARCHAR},
			</if>
			<if test="record.cState != null"> c_state = #{record.cState,jdbcType=VARCHAR},
			</if>
			<if test="record.cCounty != null"> c_county = #{record.cCounty,jdbcType=VARCHAR},
			</if>
			<if test="record.cOwner != null"> c_owner = #{record.cOwner,jdbcType=VARCHAR},
			</if>
			<if test="record.cOwnerPhone != null"> c_owner_phone = #{record.cOwnerPhone,jdbcType=VARCHAR},
			</if>
			<if test="record.cParentId != null"> c_parent_id = #{record.cParentId,jdbcType=CHAR},
			</if>
			<if test="record.cRootId != null"> c_root_id = #{record.cRootId,jdbcType=CHAR},
			</if>
			<if test="record.cCreator != null"> c_creator = #{record.cCreator,jdbcType=CHAR},
			</if>
			<if test="record.cCreateTime != null"> c_create_time =
				#{record.cCreateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="record.cModifier != null"> c_modifier = #{record.cModifier,jdbcType=VARCHAR},
			</if>
			<if test="record.cModifyTime != null"> c_modify_time =
				#{record.cModifyTime,jdbcType=TIMESTAMP},
			</if>
			<if test="record.cAvailable != null"> c_available = #{record.cAvailable,jdbcType=BIT},
			</if>
			<if test="record.cOrderNum != null"> c_order_num = #{record.cOrderNum,jdbcType=INTEGER},
			</if>
		</set>
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByExample" parameterType="map">
		update
		t_org set c_id = #{record.cId,jdbcType=CHAR}, c_code =
		#{record.cCode,jdbcType=VARCHAR},
		c_name = #{record.cName,jdbcType=VARCHAR}, c_name_abbr =
		#{record.cNameAbbr,jdbcType=VARCHAR},
		c_address = #{record.cAddress,jdbcType=VARCHAR}, c_city =
		#{record.cCity,jdbcType=VARCHAR},
		c_state = #{record.cState,jdbcType=VARCHAR}, c_county =
		#{record.cCounty,jdbcType=VARCHAR},
		c_owner = #{record.cOwner,jdbcType=VARCHAR}, c_owner_phone =
		#{record.cOwnerPhone,jdbcType=VARCHAR},
		c_parent_id = #{record.cParentId,jdbcType=CHAR}, c_root_id =
		#{record.cRootId,jdbcType=CHAR},
		c_creator = #{record.cCreator,jdbcType=CHAR}, c_create_time =
		#{record.cCreateTime,jdbcType=TIMESTAMP},
		c_modifier = #{record.cModifier,jdbcType=VARCHAR}, c_modify_time =
		#{record.cModifyTime,jdbcType=TIMESTAMP},
		c_available = #{record.cAvailable,jdbcType=BIT}, c_order_num =
		#{record.cOrderNum,jdbcType=INTEGER}
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByPrimaryKey" parameterType="com.schoolpal.db.model.TOrg">
		update t_org set c_code = #{cCode,jdbcType=VARCHAR}, c_name =
		#{cName,jdbcType=VARCHAR},
		c_name_abbr = #{cNameAbbr,jdbcType=VARCHAR}, c_address =
		#{cAddress,jdbcType=VARCHAR},
		c_city = #{cCity,jdbcType=VARCHAR}, c_state = #{cState,jdbcType=VARCHAR},
		c_county = #{cCounty,jdbcType=VARCHAR}, c_owner =
		#{cOwner,jdbcType=VARCHAR},
		c_owner_phone = #{cOwnerPhone,jdbcType=VARCHAR}, c_parent_id =
		#{cParentId,jdbcType=CHAR},
		c_root_id = #{cRootId,jdbcType=CHAR}, c_creator = #{cCreator,jdbcType=CHAR},
		c_create_time = #{cCreateTime,jdbcType=TIMESTAMP}, c_modifier =
		#{cModifier,jdbcType=VARCHAR},
		c_modify_time = #{cModifyTime,jdbcType=TIMESTAMP}, c_available =
		#{cAvailable,jdbcType=BIT},
		c_order_num = #{cOrderNum,jdbcType=INTEGER} where c_id = #{cId,jdbcType=CHAR}
	</update>
</mapper>